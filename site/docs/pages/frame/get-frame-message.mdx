# `getFrameMessage`

When a user interacts with your Frame, you receive a JSON message called
the "**Frame Signature Packet**". Decode and validate this message using the `getFrameMessage` function.

Note that if the `message` is not valid, it will be undefined.

## Usage

```ts twoslash
// @noErrors: 2307 1128 - Cannot find module 'next/server', Declaration or statement expected
import { FrameRequest, getFrameMessage } from '@coinbase/onchainkit/frame'; // [!code focus]
import { NextRequest, NextResponse } from 'next/server';

async function getResponse(req: NextRequest): Promise<NextResponse> {
  const frameRequest: FrameRequest = await req.json();
  const { isValid, message } = await getFrameMessage(frameRequest); // [!code focus]

  if (isValid) {
    // the message is valid
    return NextResponse.json({ success: true }); // Add a return statement
  }
  return NextResponse.json({ success: false }); // Add a return statement outside the if block
}
```

## Returns

[`Promise<FrameValidationResponse>`](/frame/types#framevalidationresponse)

## Parameters

### FrameRequest

- [`FrameRequest`](/frame/types#framerequest)

### options.neynarApiKey

- **Type:** `string`

Default to OnchainKit's default key.

```ts twoslash
// @noErrors: 2307 - Cannot find module 'next/server'
import { FrameRequest, getFrameMessage } from '@coinbase/onchainkit/frame'; // [!code focus]
import { NextRequest, NextResponse } from 'next/server';

async function getResponse(req: NextRequest): Promise<NextResponse> {
  const frameRequest: FrameRequest = await req.json();
// ---cut-before---
const { isValid, message } = await getFrameMessage(frameRequest, {
  neynarApiKey: 'MY_NEYNAR_API_KEY', // [!code focus]
});
// ---cut-after---
  return NextResponse.json({ isValid, message }); // Add a return statement
}
```

### options.castReactionContext

- **Type:** `boolean`

Whether to cast the reaction context. Default: true

```ts twoslash
// @noErrors: 2307 - Cannot find module 'next/server'
import { FrameRequest, getFrameMessage } from '@coinbase/onchainkit/frame'; // [!code focus]
import { NextRequest, NextResponse } from 'next/server';

async function getResponse(req: NextRequest): Promise<NextResponse> {
  const frameRequest: FrameRequest = await req.json();
// ---cut-before---
const { isValid, message } = await getFrameMessage(frameRequest, {
  castReactionContext: true, // [!code focus]
});
// ---cut-after---
  return NextResponse.json({ isValid, message }); // Add a return statement
}
```

### options.followContext

- **Type:** `boolean`

Whether to follow the context. Default: true

```ts twoslash
// @noErrors: 2307 - Cannot find module 'next/server'
import { FrameRequest, getFrameMessage } from '@coinbase/onchainkit/frame'; // [!code focus]
import { NextRequest, NextResponse } from 'next/server';

async function getResponse(req: NextRequest): Promise<NextResponse> {
  const frameRequest: FrameRequest = await req.json();
// ---cut-before---
const { isValid, message } = await getFrameMessage(frameRequest, {
  followContext: true, // [!code focus]
});
// ---cut-after---
  return NextResponse.json({ isValid, message }); // Add a return statement
}
```
